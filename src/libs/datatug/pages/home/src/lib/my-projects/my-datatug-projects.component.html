<ion-card>
	<ion-item>
		<ion-label>
			<h2>{{title || '@title is NOT defined '}}</h2>
		</ion-label>
		<ion-buttons slot="end">
			<ion-button *ngIf="authState.status === 'notAuthenticated'"
						routerLink="/login"
						color="primary" routerDirection="forward"
						style="text-transform: none"
			>
				Sign in
			</ion-button>
			<ion-button *ngIf="authState.status === 'authenticated'"
						color="medium" (click)="addProject($event)" title="Add new project">
				<ion-icon name="add" slot="start" color="primary"></ion-icon>
				<ion-label>Add</ion-label>
			</ion-button>
		</ion-buttons>
	</ion-item>

	<ng-container [ngSwitch]="authState.status">
		<ion-item *ngSwitchCase="'authenticating'">
			<ion-label color="medium">Authenticating...</ion-label>
		</ion-item>
		<ion-item *ngSwitchCase="'notAuthenticated'">
			<ion-label color="medium">Please sign in to access your projects</ion-label>
		</ion-item>
		<ng-container *ngSwitchCase="'authenticated'">
			<ng-container *ngIf="userRecordLoaded; else loading">
<!--				<ion-item *ngIf="!authState?.user?.isAnonymous">-->
<!--					<ion-icon name="file-tray-full-outline" slot="start"></ion-icon>-->
<!--					<ion-label color="medium">No personal or favorite projects yet</ion-label>-->
<!--				</ion-item>-->
				<ng-container *ngIf="projects"></ng-container>
				<ion-item *ngFor="let item of projects" tappable (click)="goProject(item)" detail>
					<ion-icon name="file-tray-full-outline" slot="start"></ion-icon>
					{{item.project.title}}
				</ion-item>
			</ng-container>
			<ng-template #loading>
				<datatug-loading-items [authStatus]="authState.status"
									   title="Loading user projects..."></datatug-loading-items>
			</ng-template>
		</ng-container>
	</ng-container>
	<ion-item-divider *ngIf="showDemoProjects">
		<ion-label><h3 style="font-weight: bold">Demo projects</h3></ion-label>
	</ion-item-divider>
	<ion-item *ngFor="let project of demoProjects" tappable (click)="goDemoProject(project)"
			  detail>
		<ion-icon name="file-tray-full-outline" slot="start"></ion-icon>
		{{project.title}}
	</ion-item>
</ion-card>
