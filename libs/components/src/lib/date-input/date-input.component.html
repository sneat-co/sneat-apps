<ion-item class="sneat-tiny-end-padding" lines="none">
	@let displayValue = $displayValue();

	<ion-input
		[label]="$label()"
		type="date"
		[readonly]="$value() === undefined || $updating()"
		[value]="displayValue"
		(ionChange)="onValueChanged($event)"
	/>

	@if ($value() !== undefined || $newValue()) {
		<ion-buttons slot="end">
			@if ($updating()) {
				<ion-button disabled="true" (click)="openDatePicker($event)">
					<ion-spinner name="lines-small" slot="start" />
					<ion-label>Saving...</ion-label>
				</ion-button>
			} @else if ($newValue() !== undefined && $newValue() !== $value()) {
				<ion-button color="danger" fill="solid" (click)="save($event)">
					<ion-icon name="save-outline" slot="start" />
					<ion-label>Save</ion-label>
				</ion-button>
			} @else if ($value()) {
				<ion-button color="medium" (click)="openDatePicker($event)">
					<ion-icon name="chevron-down-outline" slot="start" />
				</ion-button>
			} @else {
				<ion-button
					fill="solid"
					[color]="$noValueButtonColor() || 'danger'"
					(click)="openDatePicker($event)"
				>
					<ion-label>Add</ion-label>
				</ion-button>
			}
		</ion-buttons>
	}
</ion-item>
