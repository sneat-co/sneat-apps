<ion-grid class="ion-grid-layout">
	<ion-row>
		<ion-col [size]="counterparty && useColumns ? 8 : 12">
			<sneat-logist-order-counterparty-input
				[label]="label"
				[space]="space"
				[order]="order"
				[selectOnly]="selectOnly"
				(orderChange)="onOrderChanged($event)"
				[readonly]="readonly"
				[counterpartyRole]="counterpartyRole"
				[contactRole]="contactRole"
				[contactType]="contactType"
				[parentRole]="parentRole"
				[canChangeContact]="canChangeContact"
				[labelPosition]="labelPosition"
			/>
		</ion-col>
		@if (counterparty) {
			<ion-col [size]="useColumns ? 4 : 12">
				<ion-item class="sneat-no-end-padding">
					<ion-input
						[label]="refNumLabel"
						class="sneat-label-color-medium"
						[readonly]="readonly"
						[(ngModel)]="refNumber"
						[disabled]="savingRefNumber"
						(ionInput)="onRefNumberChanged($event)"
						(keyup.enter)="saveRefNumber($event)"
					/>
					@if (order?.id && !selectOnly) {
						<ion-buttons slot="end">
							@if (isRefNumberChanged && !savingRefNumber) {
								<ion-button
									color="medium"
									title="Cancel Reference # changes"
									(click)="cancelRefNumberChanges($event)"
								>
									<ion-icon name="close-outline" />
								</ion-button>
							}
							@if (savingRefNumber) {
								<ion-button [disabled]="true">
									<ion-spinner name="lines-small" />
								</ion-button>
							}
							@if (isRefNumberChanged) {
								<ion-button
									[color]="savingRefNumber ? 'medium' : 'success'"
									[disabled]="savingRefNumber"
									title="Save Reference # changes"
									(click)="saveRefNumber($event)"
								>
									<ion-icon name="save-outline" />
								</ion-button>
							}
							@if (refNumber) {
								<ion-button
									color="medium"
									title="Copy reference number to clipboard"
									(click)="copyRefNumberToClipboard($event)"
								>
									<ion-icon name="clipboard-outline" slot="start" />
								</ion-button>
							}
						</ion-buttons>
					}
				</ion-item>
			</ion-col>
		}
	</ion-row>
</ion-grid>
