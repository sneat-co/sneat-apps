<ion-card>
	<ion-item class="sneat-no-end-padding">
		@if (trucker) {
			<ion-label style="font-weight: bold"
				>{{ trucker.countryID | countryFlag }} {{ trucker.title }}</ion-label
			>
		}
		@if (!trucker) {
			<ion-label color="danger" style="font-weight: bold">Unassigned</ion-label>
		}
		<ion-label class="ion-padding-start ion-margin-start" color="medium"
			>Ref #</ion-label
		>
		<ion-input [value]="trucker?.refNumber" />
		<ion-buttons slot="end">
			<!--			<ion-button color="medium" (click)="replaceTrucker()">-->
			<!--				<ion-label *ngIf="!trucker">Assign all</ion-label>-->
			<!--				<ion-label *ngIf="trucker">Replace carrier</ion-label>-->
			<!--			</ion-button>-->
			@if (trucker) {
				<ion-button
					color="medium"
					(click)="print($event)"
					title="Print trucker instructions"
				>
					<ion-icon name="print-outline" slot="start" />
					<ion-label>Print</ion-label>
				</ion-button>
			}
			@if (trucker) {
				<ion-button
					color="medium"
					title="Remove carrier and all related segments"
					[disabled]="deleting"
					(click)="deleteTrucker()"
				>
					@if (!deleting) {
						<ion-icon name="close-outline" />
					}
					@if (deleting) {
						<ion-spinner name="lines-small" />
					}
				</ion-button>
			}
		</ion-buttons>
	</ion-item>
	@if (orderSegments && !orderSegments.length) {
		<ion-item-divider>
			<ion-label>
				<b>Segments</b>
				<span>&nbsp;&mdash; not added yet.</span>
			</ion-label>
			<ion-buttons slot="end">
				<ion-button (click)="addSegment()">
					<ion-icon name="add" slot="start" />
					<ion-label>Add segment</ion-label>
				</ion-button>
			</ion-buttons>
		</ion-item-divider>
	}

	@for (orderSegment of orderSegments; track orderSegment) {
		<sneat-trucker-segment
			[order]="order"
			[orderSegment]="orderSegment"
			[trucker]="trucker"
		/>
	}
</ion-card>
