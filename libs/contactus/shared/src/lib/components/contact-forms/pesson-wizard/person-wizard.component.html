<!--<h2>Person wizard</h2>-->
<!--<p>wizardStep: {{ wizardStep }}</p>-->
<!--<p>fields: {{ fields | json }}</p>-->
<!--<p>nameFields: {{ nameFields | json }}</p>-->
<!--<p>show: {{ show | json }};</p>-->
<!--<p>contact: {{ $contact() | json }}</p>-->
<!--<p>wizardStep: {{wizardStep}}</p>-->

@if (show.ageGroup) {
	<sneat-age-group-form
		[spaceType]="$contact().space.type"
		[hidePetOption]="hidePetOption"
		[disabled]="disabled"
		[$ageGroup]="$contact().dbo.ageGroup"
		(ageGroupChange)="onAgeGroupChanged($event)"
	/>
}

@if (show.gender) {
	<sneat-gender-form
		[disabled]="disabled"
		[genderID]="$contact().dbo.gender"
		(genderChange)="onGenderChanged($event)"
	/>
}

@if (!requires.relatedAs?.hide && show.relatedAs) {
	<sneat-relationship-form
		[isActive]="$wizardStep() === 'relatedAs'"
		[disabled]="disabled"
		[$space]="$contact().space"
		[$relatedTo]="$relatedToUser()"
		[$relatedItems]="$contact().dbo.related"
		[$ageGroup]="$contact().dbo.ageGroup"
		(relatedAsChange)="onRelatedAsChanged($event)"
	/>
	<!--[relatedAs]="newPerson.related?.relatedAs?.length === 1 ? newPerson.relatedTo?.relatedAs?.[0] : undefined"-->
}

@if (show.name) {
	<sneat-names-form
		[name]="$contact().dbo.names"
		[isActive]="$wizardStep() === 'name'"
		[showNextButton]="false"
		[fields]="nameFields"
		(namesChanged)="onNameChanged($event)"
		[disabled]="disabled"
		(next)="nextFromName($event)"
	/>
}

@if (!requires.roles?.hide && show.roles) {
	<sneat-roles-form
		[$space]="$contact().space"
		[isActive]="$wizardStep() === 'roles'"
		[disabled]="disabled"
	/>
}

@if (show.communicationChannels) {
	<ion-segment [(ngModel)]="tab">
		<ion-segment-button value="emails">Emails</ion-segment-button>
		<ion-segment-button value="phones">Phones</ion-segment-button>
	</ion-segment>
	@if (tab === "emails" && !requires.email?.hide) {
		<sneat-emails-form
			[hideHeader]="true"
			[emails]="$contact().dbo.emails"
			(emailsChange)="onEmailsChanged($event)"
		/>
	}
	@if (tab === "phones" && !requires.phone?.hide) {
		<sneat-phones-form
			[hideHeader]="true"
			[phones]="$contact().dbo.phones"
			(phonesChange)="onPhoneChanged($event)"
		/>
	}
}

<!--@if (wizardStep === 'emails' || wizardStep === 'phones') {-->
<!--	<ion-button-->
<!--		class="ion-margin"-->
<!--		size="medium"-->
<!--		[color]="show.nameNext ? 'primary' : 'medium'"-->
<!--		(click)="openNext(wizardStep)"-->
<!--	>-->
<!--		<ion-label>Next</ion-label>-->
<!--		<ion-icon name="arrow-forward-circle-outline" slot="end"></ion-icon>-->
<!--	</ion-button>-->
<!--}-->
